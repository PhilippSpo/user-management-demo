<link rel="import" href="/components/polymer/polymer.html">
<link rel="import" href="/components/core-list/core-list.html">
<link rel="import" href="/components/core-image/core-image.html">
<!-- import image iconset and core-icon
<!-- <link rel="import" href="/components/core-icons/core-icons.html">
<link rel="import" href="/components/core-icons/image-icons.html"> -->
<polymer-element name="groups-list" attributes="hPanel groups clickedGroupCallback" layout vertical>
	<style>
		#userList {
			padding-top: 8px;
		}
	</style>
	<template id="groupsList">
		<style type="text/css">
			.item {
				height: 72px;
				border-bottom: 1px solid #f0f0f0;
				cursor: pointer;
			}
			.avatar {
				margin-left: 16px;
				width: 40px;
				height: 40px;
				border-radius: 20px;
				background: #EFEFEF;
			}
			.content {
				padding-left: 16px;
				padding-right: 16px;
			}
			.text {
				font-size: 16px;
			}
			.secondary-text {
				font-size: 14px;
			}
			.emails {
				color: #A3A3A3;
			}
		</style>
		<div flex>
			<core-list id="list" data="{{groups}}" flex>
				<template>
					<div class="item group" data-group-id="{{model._id}}" on-tap="{{clickedGroup}}" horizontal layout center>
						<core-image class="avatar" src="{{model.avatar}}" sizing="cover" preload></core-image>
						<div class="content">
							<div class="text" flex>{{model.groupname}}</div>
							<div class="secondary-text" flex>
							{{model.leader}}<span class="emails"></span>
							</div>
						</div>
					</div>
				</template>
			</core-list>
		</div>
	</template>
	<script>
		Polymer('groups-list',{
			ready: function() {
				var self = this;
				// this sucks bigtime
				this.timeout1 = window.setTimeout(function() {
					if(document.getElementById(self.hPanel)){
	            		self.$.list.scrollTarget = document.getElementById(self.hPanel).scroller;
	            	}
  				}, 500);
			},
			clickedGroup: function(e) {
				var group = e.target.templateInstance.model.model;
				this.clickedGroupCallback(e, group);
			},
			updateList: function() {
				this.$.list.updateSize();
			}
		});
	</script>
</polymer-element>