<link rel="import" href="/components/polymer/polymer.html">
<link rel="import" href="/components/paper-item/paper-item.html">
<link rel="import" href="/components/core-icon/core-icon.html">
<link rel="import" href="/components/core-list/core-list.html">

<polymer-element name="check-list-old" attributes="items itemClicked">
    <template>
        <style>
            section {
                max-height: 200px;   
                overflow-y: auto;
            }
            core-icon {
                margin-left: auto;
                margin-right: 0;
            }
            .checked {
                color: green;
            }
            .primary-text {
                font-size: 16px;
            }
            .secondary-text {
                font-size: 14px;
            }
        </style>
        <section>
            <template repeat="{{item, itemIndex in items}}">
                <paper-item on-tap="{{touch}}">
                    <div class="content">
                        <div class="primary-text" flex>
                            {{item.profile.fullname}}
                        </div>
                        <div class="secondary-text" flex>
                            {{item.emails[0].address}}
                        </div>
                    </div>
                    <template if="{{item.checked}}">
                        <core-icon icon="check" class="{{item.checked}}"></core-icon>
                    </template>
                    <template if="{{!item.checked}}">
                        <core-icon icon="lock" class="{{item.checked}}"></core-icon>
                    </template>
                </paper-item>
            </template>
        </section>
    </template>
    <script>

        Polymer({
            items: [{
                title: 'title1'
            },{
                title: 'title2'
            }],
            itemClicked: function() {

            },
            touch: function(e) {
                selectedItem = e.target.templateInstance.model.item;
                if(selectedItem.checked === 'checked'){
                    selectedItem.checked = '';
                }else{
                    selectedItem.checked = 'checked';
                }
                // this.checked = true;
                this.itemClicked(selectedItem);
            }
        });


    </script>
</polymer-element>

<polymer-element name="user-check-list" attributes="items hPanel itemClicked" layout vertical>
    <template id="userCheckList">
        <style type="text/css">
            .item {
                height: 72px;
                border-bottom: 1px solid #f0f0f0;
                /*cursor: pointer;*/
            }
            .content {
                padding-left: 16px;
                padding-right: 16px;
            }
            .text {
                font-size: 16px;
            }
            .secondary-text {
                font-size: 14px;
            }
            .emails {
                color: #A3A3A3;
            }
            core-icon {
                margin-left: auto;
                margin-right: 0;
            }
            .checked {
                color: green;
            }
            #list {
                /*height: 200px;*/
                /*height: 100%;*/
            }
        </style>
        <!-- <div flex> -->
            <core-list id="list" data="{{items}}" flex>
                <template>
                    <div class="item"  on-tap="{{clickedItem}}" horizontal layout center>
                        <div class="content" flex horizontal justified layout>
                            <div class="text">
                                <div class="text" flex>{{model.profile.fullname}}</div>
                                <div class="secondary-text" flex>
                                {{model.username}}<span class="emails"> - {{model.emails[0].address}}</span>
                                </div>
                            </div>
                            <div></div>
                            <div horizontal layout center>
                                <template if="{{item.checked}}">
                                    <core-icon icon="check" class="{{item.checked}}"></core-icon>
                                </template>
                                <template if="{{!item.checked}}">
                                    <core-icon icon="lock" class="{{item.checked}}"></core-icon>
                                </template>
                            </div>
                        </div>
                    </div>
                </template>
            </core-list>
        <!-- </div> -->
    </template>
    <script>
        Polymer('user-check-list',{
            ready: function() {
                var self = this;
                if(document.getElementById(self.hPanel)){
                    self.$.list.scrollTarget = document.getElementById(self.hPanel).scroller;
                }
            },
            clickedItem: function(e) {
                selectedItem = e.target.templateInstance.model.item;
                if(selectedItem.checked === 'checked'){
                    selectedItem.checked = '';
                }else{
                    selectedItem.checked = 'checked';
                }
                this.itemClicked(selectedItem);
            },
            updateList: function() {
                this.$.list.updateSize();
            }
        });
    </script>
</polymer-element>